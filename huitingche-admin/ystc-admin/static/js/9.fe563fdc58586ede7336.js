webpackJsonp([9],{"6Wwh":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("lC5x"),r=n.n(a),o=n("J0Oq"),i=n.n(o),s=n("4YfN"),u=n.n(s),c=n("yOOA"),l=n("gyMJ"),d=n("R4Sj"),g=n("+RYy"),m=n.n(g),p={components:{tabledata:c.a,VDistpicker:m.a},data:function(){var e=this;this.$createElement;return{tableColumns:[{type:"selection",width:60,align:"center"},{title:"停车场名称",align:"center",key:"parkingLotName"},{title:"停车场编号",align:"center",key:"parkingLotNumber"},{title:"泊位号",align:"center",key:"positionNumber"},{title:"设备编号",align:"center",key:"deviceId"},{title:"路段管理员",align:"center",render:function(e,t){return e("div",[t.row.managerName?t.row.managerName:"暂无"])},key:"managerName"},{title:"管理员联系方式",align:"center",key:"phone"},{title:"创建时间",align:"center",key:"createTime"},{title:"操作",align:"center",width:220,render:function(t,n){return t("div",[t("Button",{style:{"margin-right":"10px"},on:{click:function(){e.$Modal.confirm({title:"操作确认",content:"确认删除吗？",onOk:function(){alert("删除成功")}})}}},"删除"),t("Button",{on:{click:function(){}}},"编辑")])}}],queryUrl:l.p,queryData:{vendorId:3},page:1,num:10,type:"json",findeCondition:"",searchValue:"",conditionList:[{name:"查看全部",key:"0"},{name:"车位编号",key:"positionNumber"},{name:"停车场编号",key:"parkingLotNumber"},{name:"管理员名称",key:"managerName"}],addParkingForm:{vendorId:3,detailedAddress:"",parkingLotName:""},showParkingAddBox:!1,addParkingFormRule:{parkingLotName:[{required:!0,message:"请输入停车场名字",trigger:"blur"}],detailedAddress:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},select:{province:"广东省",city:"广州市",county:"海珠区"},autherButtonShow:!1,distributionShow:!1,parkingLogManagerList:null,targetParkingManager:"",targetManagerNumberList:[]}},computed:u()({},Object(d.b)(["userInfo"])),methods:{findParkingLotManager:function(){var e=this;return i()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={vendorId:e.userInfo.vendorId,superiorNumber:e.userInfo.managerNumber},t.next=3,Object(l.h)(n);case 3:a=t.sent,console.log(a),200===a.code?e.parkingLogManagerList=a.data:e.$Message.error("查询失败");case 6:case"end":return t.stop()}},t,e)}))()},onSelect:function(e,t){for(var n in this.targetManagerNumberList=[],e)this.targetManagerNumberList.push(e[n].positionNumber)},onSelectAll:function(e,t){console.log(e),console.log(t)},changeTableNum:function(){this.$refs.table.updateData()},distributionConfrim:function(){var e=this;return i()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.targetManagerNumberList),0!==e.targetManagerNumberList.length){t.next=4;break}return e.$Message.error("请选择车位"),t.abrupt("return",!1);case 4:if(e.targetParkingManager){t.next=7;break}return e.$Message.error("请选择分配给谁"),t.abrupt("return",!1);case 7:return n={parkingLotNumber:"000002",managerNumber:e.targetParkingManager,positionNumberList:e.targetManagerNumberList.toString()},t.next=10,Object(l.l)(n);case 10:200===t.sent.code&&e.$Message.success("分配成功");case 12:case"end":return t.stop()}},t,e)}))()},searchFind:function(){var e=this;delete this.queryData.positionNumber,delete this.queryData.parkingLotNumber,delete this.queryData.managerName,this.queryData={vendorId:this.userInfo.vendorId},this.queryData[this.findeCondition]=this.searchValue,this.$nextTick(function(){e.$refs.table.updateData()})},autherConfrim:function(){this.autherButtonShow=!1,this.$refs.table.updateData()},getAuother:function(){var e=this;return i()(r.a.mark(function t(){var n,a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$Message.loading({content:"加载中...",duration:0}),document.getElementById("qrCodeContent").innerHTML="",a={manageNumber:e.userInfo.managerNumber},t.next=5,Object(l.n)(a);case 5:200===(o=t.sent).code?(console.log(3),e.utils.qrcode("qrCodeContent",o.data,150),e.autherButtonShow=!0,setTimeout(n,0)):e.$Message.error("获取二维码失败");case 7:case"end":return t.stop()}},t,e)}))()},addParking:function(){var e=this;return i()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u()({},e.addParkingForm,e.select),console.log(n),t.next=4,Object(l.b)(n);case 4:200===(a=t.sent).code?e.$Message.success("新增成功"):e.$Message.success(a.msg),e.$refs.table.updateData();case 7:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.findParkingLotManager(),console.log(this.userInfo)}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"parkinglist"},[n("div",{staticClass:"searchContent"},[n("div",[n("Input",{attrs:{search:""},on:{"on-search":e.searchFind},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[n("Select",{staticStyle:{width:"120px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.findeCondition,callback:function(t){e.findeCondition=t},expression:"findeCondition"}},e._l(e.conditionList,function(t){return n("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])}),1),e._v(" "),n("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:e.searchFind},slot:"append"})],1)],1),e._v(" "),n("div",[n("Input",{staticStyle:{width:"auto"},attrs:{search:"",placeholder:"输入单次查询条数"},on:{"on-search":e.changeTableNum},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}},[n("Icon",{attrs:{slot:"suffix",type:"ios-search"},slot:"suffix"})],1)],1),e._v(" "),1===e.userInfo.role?n("div",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.distributionShow=!0}}},[e._v("分配车位")]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:e.getAuother}},[e._v("授权路段管理员")]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.showParkingAddBox=!0}}},[e._v("新增车位")])],1):e._e()]),e._v(" "),n("tabledata",{ref:"table",attrs:{"page-position":"center",columns:e.tableColumns,queryUrl:e.queryUrl,queryData:e.queryData,current:e.page,pageSize:e.num,type:e.type},on:{"on-select":e.onSelect,"on-select-all":e.onSelectAll}}),e._v(" "),n("Modal",{attrs:{title:"新增停车场"},on:{"on-ok":e.addParking,"on-cancel":function(t){e.showParkingAddBox=!1}},model:{value:e.showParkingAddBox,callback:function(t){e.showParkingAddBox=t},expression:"showParkingAddBox"}},[n("div",[n("Form",{ref:"formValidate",attrs:{model:e.addParkingForm,rules:e.addParkingFormRule,"label-width":100}},[n("FormItem",{attrs:{label:"停车场名字",prop:"parkingLotName"}},[n("Input",{attrs:{placeholder:"请输入停车场名字"},model:{value:e.addParkingForm.parkingLotName,callback:function(t){e.$set(e.addParkingForm,"parkingLotName",t)},expression:"addParkingForm.parkingLotName"}})],1),e._v(" "),n("FormItem",{attrs:{label:"详细地址",prop:"detailedAddress"}},[n("Input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.addParkingForm.detailedAddress,callback:function(t){e.$set(e.addParkingForm,"detailedAddress",t)},expression:"addParkingForm.detailedAddress"}})],1),e._v(" "),n("FormItem",{attrs:{label:"详细地址",prop:"detailedAddress"}},[n("v-distpicker",{attrs:{province:e.select.province,city:e.select.city,area:e.select.county}})],1)],1)],1)]),e._v(" "),n("Modal",{attrs:{width:"220",align:"center",title:"授权停车场管理"},on:{"on-ok":function(t){e.autherButtonShow=!1},"on-cancel":function(t){e.autherButtonShow=!1}},model:{value:e.autherButtonShow,callback:function(t){e.autherButtonShow=t},expression:"autherButtonShow"}},[n("div",{attrs:{id:"qrCodeContent"}})]),e._v(" "),n("Modal",{attrs:{width:"220",align:"center",title:"选择分配给谁"},on:{"on-ok":e.distributionConfrim,"on-cancel":function(t){e.distributionShow=!1}},model:{value:e.distributionShow,callback:function(t){e.distributionShow=t},expression:"distributionShow"}},[n("div",[n("Select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.targetParkingManager,callback:function(t){e.targetParkingManager=t},expression:"targetParkingManager"}},e._l(e.parkingLogManagerList,function(t){return n("Option",{key:t.managerNumber,attrs:{value:t.managerNumber}},[e._v(e._s(t.managerName))])}),1)],1)])],1)},staticRenderFns:[]};var f=n("C7Lr")(p,h,!1,function(e){n("urqF")},"data-v-37b03b0c",null);t.default=f.exports},urqF:function(e,t){}});
//# sourceMappingURL=9.fe563fdc58586ede7336.js.map